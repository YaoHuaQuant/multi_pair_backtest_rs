# 策略Mk1明细

## 问
我需要设计一套比特币量化交易策略，其核心逻辑如下：
1. 基于比特币的历史价格进行回归拟合，获得长周期（4年）下的“价格-时间”模型（简称为“预测模型”），用于预测未来的价格趋势。
2. 将预测模型进行一阶求导和二阶求导，将预测模型曲线称为T，一阶导函数曲线称为T1，二阶导函数曲线称为T2；基于T1和T2的正负特性，将比特币涨跌周期拆分为四个区间：
   2.1 当T1>0且T2>0时，加速上涨，此时需要逐步开多仓；
   2.2 当T1>0且T2<0时，减速上涨，此时需要逐步平多仓；
   2.3 当T1<0且T2<0时，加速下跌，此时需要逐步开空仓；
   2.4 当T1<0且T2>0时，减速下跌，此时需要逐步平空仓；
   基于以上四个周期区间，通过反馈控制算法来调整仓位比例，从而完成加仓和平仓的过程。
3. 确定目标仓位比例：根据预测模型曲线，计算出一个合适的目标仓位比例；可以参考凯利公式，通过调整仓位来获取最大收益。
4. 反馈控制算法：根据实际仓位比例和目标仓位比例的差异，调整开单和平单的比例，以及不同价格的订单密度，从而控制实际仓位比例。
5. 订单调整方法：挂单遵循少量多次原则，每个订单的本金额度相同；通过调整订单的数量和定价，实现订单密度的调整，进而达到反馈控制的效果。

基于以上核心逻辑，请帮我设计步骤3、步骤4和步骤5的具体算法细节。

## 答
todo